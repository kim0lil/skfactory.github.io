---
title: ANT - 1
tags: BUILD ANT 업무자동화
key: ANT - 1
---

## ANT란?

ANT는 자바 언어를 사용하여 필요한 일련화된 과정을 자동화하는 소프트웨어 빌드 도구입니다.

ANT를 동작하기 위해서는 자바를 설치하거나 자바를 다운로드 받아 환경변수에 설정하여 주어야 하며

ant는 기본적으로 xml을 지향하므로 xml에 관한 기본적인 지식이 필요합니다.

### JAVA 설치

ANT는 자바를 사용하여 작성된 툴이기 때문에 ANT를 사용하기 전 먼저 JAVA를 등록 할 필요가 있습니다.

#### 자바설치 (Windows)

>작업예정

#### 자바설치 (Linux)

>작업예정

#### 자바설치 (Mac)

>작업예정

### ANT 설치

#### ANT를 다운로드하자

자바를 설치 하였으며 기본적으로 ant를 사용할수 있는 기초가 만들어 졌습니다.

먼저 ant를 사용하기 위해서는 자바를 설치할 필요가 있다고 말한적이 있습니다.

자바를 언제 사용할지 몰라 당황하였다면 이제 설치한 자바를 사용하는 ANT를 다운받아 보도록 하겠습니다.

ANT는 아파치 제단에서 만들어진 소프트웨어로써 아파치제단의 기본적인 이념은 비영리적인 소프트웨어의 배포이기 때문에 2차 저작권에 대한 저작권법이 느슨한 편입니다.

아파치제단의 [공식 사이트](https://ant.apache.org/bindownload.cgi)에서 직접 다운로드를 받거나 미리 다운로드 받아 놓은 [본인의 깃 허브](https://github.com/kim0lil/08501/blob/master/apache-ant-1.10.6-src.zip)에서 앤트를 다운로드 받도록 합니다.

다운로드 받은 파일은 앤트를 사용할 폴더를 만든 다음 압축을 해제해 주세요.

![ ](https://github.com/kim0lil/skfactory.github.io/blob/master/screenshots/ant/0000001.png?raw=true)

#### 환경변수로 등록(Windows)

다운로드가 완료 되었으면 이제는 환경변수를 등록하는 일이 남았습니다

자바를 설치할때 환경변수의 PATH를 등록한 경험이 있을 것입니다

환경변수에 경로를 등록한다는 것은 시스템(os)에서 사용 가능한 리소스로 등록 한다는 것입니다

쉽게 설명하여 간단한 경로를 등록하여 환경변수를 등록하는 이유를 알아 보도록 하겠습니다.

#### 환경변수로 등록(Mac)

다운로드가 완료 되었으면 이제는 환경변수를 등록하는 일이 남았습니다

자바를 설치할때 환경변수의 PATH를 등록한 경험이 있을 것입니다

환경변수에 경로를 등록한다는 것은 시스템(os)에서 사용 가능한 리소스로 등록 한다는 것입니다

쉽게 설명하여 간단한 경로를 등록하여 환경변수를 등록하는 이유를 알아 보도록 하겠습니다.

환경변수를 등록할 폴더를 하나 선택한 다음 아래 명령어를 사용하여 편집기를 여세요

```sh
> vi echo.sh
```

편집기가 열리면 a를 누른 다음 편집모드에 들어간 다음 아래 코드를 입력하세요.

```sh
#!/bin/bash
echo "echo >> $1"
```

그런 다음 `shift` + `:`를 눌러 확장모드로 돌아와 `wq(저장 후 종료)`를 사용하여 터미널로 돌아옵니다.

이제 권한을 주도록 하겠습니다.

```sh
> chmod +x eco.sh
```

이제 실행 권한이 있는 파일을 실행해보도록 하겠습니다.

```sh
> ./eco.sh "hello ant"

echo >> hello ant
```

자 그럼 이제 사용자의 루트 폴더로 이동합니다.

```sh
cd ~
```

다음으로 echo.sh 파일을 실행하는 동일한 명령어를 실행하면 아래와 같은 에러를 발생시킵니다.

```sh
> ./eco.sh "hello ant"

no such file or directory: ./eco.sh
```

이렇듯이 기존 시스템에 없는 실행 파일이나 리소스를 시스템에서 사용 가능하도록 하려면 환경 변수에 등록 하여야 합니다.

다시 돌아가서 이제 환경변수의 PATH를 등록해 보도록 할까요?

먼저 `.bash_profile`을 만들어야 합니다.

```sh
cd ~ | vi .bash_profile
```

이제 경로를 등록해 보겠습니다.

```sh
# eco.sh가 생성된 폴더의 경로를 지정합니다.
TEST_HOME=eco.sh의 폴더 경로

# 시스템에서 사용할 PATH에 기존 PATH를 추가합니다.
PATH=$PATH:$TEST_HOME

# 외부에서 사용할 수 있도록 TEST_HOME 변수를 노출합니다.
export TEST_HOME
```

이제 터미널로 돌아온 다음 변경 된 소스 파일을 반영합니다.

```sh
source .bash_profile
```

시스템에서 우리가 만든 eco.sh를 사용하기 위한 준비가 되었습니다.

이제 아무곳에 가서 이전 에러가 난 명령어를 실행해 보도록 하세요

```sh
> eco.sh "hello ant"

echo >> hello ant
```

또는 노출된 경로를 사용할 수도 있습니다.

```sh
> eco.sh $TEST_HOME

echo >> 지정한 경로
```

이제 환경변수와 PATH에 관한 기본적인 사항을 이해하였을 것입니다.

그렇다면 실제 ANT의 환경변수를 등록해 보도록 할까요?

환경변수를 등록할 때에는 시스템(OS)에 따라 설정법이 다르며 설정 후에는 시스템과는 무관하게 작동하니 걱정하지 마세요.

먼저 `.bash_profile` 파일을 편집기로 엽니다.

```s
cd ~ | vi .bash_profile
```

편집모드로 변경한 다음 `ANT_HOME` 과 `PATH`를 설정하도록 합니다.

```sh

ANT_HOME=~/dev/tools/ant/apache-ant-1.10.8

PATH=$PATH:$ANT_HOME/bin

export ANT_HOME
```

이제 터미널로 돌아온 다음 변경된 소스파일을 반영합니다.

```sh
source .bash_profile
```

어렵지는 않았을 것이라 생각합니다.

터미널로 돌아가서 아래 명령어를 실행하여 잘 반영 되었는지 확인합니다.

```s
> ant -version

Apache Ant(TM) version 1.10.8 compiled on May 10 2020
```

잘 반영이 되었다면 버전 정보와 함께 버전이 업데이트 된 일자를 출력할 것입니다.

### ANT 기본 속성들 및 기초 - 1

여기까지 잘 따라 오셨습니다.

이제부터가 ANT를 다루는 실제 구간입니다.

여기서 부터는 한걸음 한걸음씩 설명할 예정이니 어렵지 않게 따라하고 습득할수 있으실 것입니다.

먼저 ant 파일을 만들어 보겠습니다.

(원하는 곳에 폴더를 만든 다음 작업 하도록 합니다.)

파일의 명칭은 `build.xml`으로 하여 파일을 생성한 다음 build.xml 파일을 열어 수정 할 준비를 합니다.

(vscode, sublime와 ultra edit와 같은 편집기를 사용하시면 더욱 편합니다.)

가장 먼저 알아야 할 것은 ant에 최종 태그는 `project`라는 것입니다.

(빌드 스크립트안에서는 오직 하나의 project 태그만이 있습니다.)

따라서 먼저 최상단에 `project` 태그를 등록하겠습니다.

```xml
<project>

</project>
```

여기까지만 작성한 다음 명령어 실행기(cmd, terminal)을 실행한 다음 해당 경로로 이동하여 아래 명령어를 실행합니다.

```s
ant

Buildfile: ...

BUILD SUCCESSFUL
Total time: 0 seconds
```

축하합니다.

ant 빌드를 처음으로 경험하였습니다.

우리는 지금 ant를 설치하고 ant의 빌드툴을 사용하여 실제 자동화된 빌드를 처리하는 일을 하였습니다.

하지만 현제는 아무런 기능도 없는 깡통으로 된 빌드입니다.

이 빌드툴에게 일을 하나씩 던져 주면서 빌드툴과 관련 된 내용을 하나씩 알아가 보도록 하겠습니다.

##### echo 태그를 사용하여 간단한 빌드 스크립트를 작성해 보자

이번에 작성해볼 작업은 echo 태그를 사용하여 간단한 빌드 스크립트를 작성해 보도록 하겠습니다.

이전 작성한 스크립트 파일(build.xml)파일을 오픈합니다.

이제 `project` 태그 아래 `target` 태그를 추가해 주도록 하겠습니다.

target은 실제 빌드 시 작업 단위로써 여러개의 빌드 단위를 지닐 수 있습니다.

먼저 `target`태그를 추가해 보겠습니다.

```xml
<project>
    <target>

    </target>
</project>
```

방금전 말한 바와 같이 target은 빌드의 작업 단위이므로 여러개가 만들어 질 수 있다고 하였습니다.

따라서 각 타겟은 고유한 아이디를 지니고 있으며 이 아이디를 `name` 속성 값을 사용하여 나타냅니다.

(예제에서는 name을 default로 지정하였으며 다르게 지정하여도 무방합니다.)

```xml
<project>
    <target name="default">

    </target>
</project>
```

target의 고유 아이디가 주어졌으며 이 고유 아이디를 사용하여 `default`라는 속성값을 사용하여 빌드 스크립트의 기본 빌드를 지정해 보도록 하겠습니다.

(기본 빌드는 `ant`명령어를 실행하였을 경우 target을 지정하지 않을 경우 실행 되는 기본 실행 target을 말합니다.)

```xml
<!-- 아래 "default" name을 가진 target을 지정합니다 -->
<project default="default"> 
    <target name="default">

    </target>
</project>
```

이번에는 빌드스크립트를 진짜 살아 움직이게 해 보아야 겠죠?

빌드 시 사용되는 실제 동작은 `task`를 사용하여 동작하게 할 수 있습니다.

(각각의 task는 이 블로그에 나오는 부분들을 천천히 사용해보며 익숙해지면 되므로 어렵게 생각하지 마세요)

우리는 먼저 `echo task`를 사용해 보도록 하겠습니다.

사용하기 위해서는 target태그에 `echo`태그를 등록하는 일부터 시작하겠습니다.

```xml
<project default="default"> 
    <target name="default">
        <echo />
    </target>
</project>
```

이제 메시지를 하나 출력해 보겠습니다.

(메시지는 message 속성값을 사용하거나 태그내부에 값을 등록하여 수행 할수 있습니다.)

```xml
<project default="default"> 
    <target name="default">
        <echo message="Hello Ant Build Tools"/>
    </target>
</project>
```

여러분의 첫번째 빌드 스크립트 자동화가 생성되었습니다.

이제 여러분이 생성한 빌드 스크립트를 ant를 사용하여 실행해 보세요

```s
ant

Buildfile: ...


default:
     [echo] Hello Ant Build Tools

BUILD SUCCESSFUL
Total time: 0 seconds
```

![ ](https://raw.githubusercontent.com/kim0lil/skfactory.github.io/master/screenshots/ant/0000002.png)

어떤가요 ant가 어려우신가요?

- - -

> tip

build.xml말고 다른 이름으로 빌드 파일을 만드셨다면 `-f` 옵션을 사용하여 빌드 스크립트를 실행 시 파일을 지정할 수 있습니다.

***buildScript.xml 파일로 생성하였을 경우 아래 명령어로 ant를 실행 할수 있습니다.***

```s
ant -f buildScript.xml
```

- - -